import { v as v$1 } from './chunk-00c6b2a2.js';
import './chunk-b2fb9ac7.js';
import { j as j$1 } from './chunk-9bc25606.js';
import { d } from './chunk-a7dd8f94.js';
import { h } from './chunk-d3f7121b.js';
import { P as Pe, l as lt, d as dt, y as yt, v as vt, x as xe, a as v$2 } from './chunk-dd5a9712.js';

var m,y="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,_={};function n(){if(void 0!==m)return m;if(y.XMLHttpRequest){m=new y.XMLHttpRequest;try{m.open("GET",y.XDomainRequest?"/":"https://example.com");}catch(t){m=null;}}else m=null;return m}function f(t){var r=n();if(!r)return !1;try{return r.responseType=t,r.responseType===t}catch(t){}return !1}function a(t){return "function"==typeof t}_.fetch=a(y.fetch)&&a(y.ReadableStream),_.writableStream=a(y.WritableStream),_.abortController=a(y.AbortController),_.arraybuffer=_.fetch||f("arraybuffer"),_.msstream=!_.fetch&&f("ms-stream"),_.mozchunkedarraybuffer=!_.fetch&&f("moz-chunked-arraybuffer"),_.overrideMimeType=_.fetch||!!n()&&a(n().overrideMimeType),m=null;var v={};(v=v=Pe).Stream=v,v.Readable=v,v.Writable=lt,v.Duplex=dt,v.Transform=yt,v.PassThrough=vt,v.finished=xe,v.pipeline=v$2;var b=v;var T;T=function(){for(var t={},r=0;r<arguments.length;r++){var o=arguments[r];for(var s in o)g.call(o,s)&&(t[s]=o[s]);}return t};var g=Object.prototype.hasOwnProperty;var R=T;var C={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};var E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,A={},w=j$1.Buffer,S=v$1,O=_,x=d,M=b,H=A.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},P=A.IncomingMessage=function(t,r,o,s){var i=this||E;if(M.Readable.call(i),i._mode=o,i.headers={},i.rawHeaders=[],i.trailers={},i.rawTrailers=[],i.on("end",(function(){S.nextTick((function(){i.emit("close");}));})),"fetch"===o){if(i._fetchResponse=r,i.url=r.url,i.statusCode=r.status,i.statusMessage=r.statusText,r.headers.forEach((function(t,r){i.headers[r.toLowerCase()]=t,i.rawHeaders.push(r,t);})),O.writableStream){var u=new WritableStream({write:function(t){return new Promise((function(r,o){i._destroyed?o():i.push(w.from(t))?r():i._resumeFetch=r;}))},close:function(){E.clearTimeout(s),i._destroyed||i.push(null);},abort:function(t){i._destroyed||i.emit("error",t);}});try{return r.body.pipeTo(u).catch((function(t){E.clearTimeout(s),i._destroyed||i.emit("error",t);})),void 0}catch(t){}}var d=r.body.getReader();!function e(){d.read().then((function(t){if(!i._destroyed){if(t.done)return E.clearTimeout(s),i.push(null),void 0;i.push(w.from(t.value)),e();}})).catch((function(t){E.clearTimeout(s),i._destroyed||i.emit("error",t);}));}();}else if(i._xhr=t,i._pos=0,i.url=t.responseURL,i.statusCode=t.status,i.statusMessage=t.statusText,t.getAllResponseHeaders().split(/\r?\n/).forEach((function(t){var r=t.match(/^([^:]+):\s*(.*)/);if(r){var o=r[1].toLowerCase();"set-cookie"===o?(void 0===i.headers[o]&&(i.headers[o]=[]),i.headers[o].push(r[2])):void 0!==i.headers[o]?i.headers[o]+=", "+r[2]:i.headers[o]=r[2],i.rawHeaders.push(r[1],r[2]);}})),i._charset="x-user-defined",!O.overrideMimeType){var c=i.rawHeaders["mime-type"];if(c){var l=c.match(/;\s*charset=([^;])(;|$)/);l&&(i._charset=l[1].toLowerCase());}i._charset||(i._charset="utf-8");}};x(P,M.Readable),P.prototype._read=function(){var t=this||E,r=t._resumeFetch;r&&(t._resumeFetch=null,r());},P.prototype._onXHRProgress=function(){var t=this||E,r=t._xhr,o=null;switch(t._mode){case"text":if((o=r.responseText).length>t._pos){var s=o.substr(t._pos);if("x-user-defined"===t._charset){for(var i=w.alloc(s.length),u=0;u<s.length;u++)i[u]=255&s.charCodeAt(u);t.push(i);}else t.push(s,t._charset);t._pos=o.length;}break;case"arraybuffer":if(r.readyState!==H.DONE||!r.response)break;o=r.response,t.push(w.from(new Uint8Array(o)));break;case"moz-chunked-arraybuffer":if(o=r.response,r.readyState!==H.LOADING||!o)break;t.push(w.from(new Uint8Array(o)));break;case"ms-stream":if(o=r.response,r.readyState!==H.LOADING)break;var d=new E.MSStreamReader;d.onprogress=function(){d.result.byteLength>t._pos&&(t.push(w.from(new Uint8Array(d.result.slice(t._pos)))),t._pos=d.result.byteLength);},d.onload=function(){t.push(null);},d.readAsArrayBuffer(o);}t._xhr.readyState===H.DONE&&"ms-stream"!==t._mode&&t.push(null);};var q,N="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,L=j$1.Buffer,k=v$1,I=_,U=d,D=A,F=b,j=D.IncomingMessage,G=D.readyStates;var B=q=function(t){var r,o=this||N;F.Writable.call(o),o._opts=t,o._body=[],o._headers={},t.auth&&o.setHeader("Authorization","Basic "+L.from(t.auth).toString("base64")),Object.keys(t.headers).forEach((function(r){o.setHeader(r,t.headers[r]);}));var s=!0;if("disable-fetch"===t.mode||"requestTimeout"in t&&!I.abortController)s=!1,r=!0;else if("prefer-streaming"===t.mode)r=!1;else if("allow-wrong-content-type"===t.mode)r=!I.overrideMimeType;else {if(t.mode&&"default"!==t.mode&&"prefer-fast"!==t.mode)throw new Error("Invalid value for opts.mode");r=!0;}o._mode=function(t,r){return I.fetch&&r?"fetch":I.mozchunkedarraybuffer?"moz-chunked-arraybuffer":I.msstream?"ms-stream":I.arraybuffer&&t?"arraybuffer":"text"}(r,s),o._fetchTimer=null,o.on("finish",(function(){o._onFinish();}));};U(B,F.Writable),B.prototype.setHeader=function(t,r){var o=this||N,s=t.toLowerCase();-1===X.indexOf(s)&&(o._headers[s]={name:t,value:r});},B.prototype.getHeader=function(t){var r=(this||N)._headers[t.toLowerCase()];return r?r.value:null},B.prototype.removeHeader=function(t){delete(this||N)._headers[t.toLowerCase()];},B.prototype._onFinish=function(){var t=this||N;if(!t._destroyed){var r=t._opts,o=t._headers,s=null;"GET"!==r.method&&"HEAD"!==r.method&&(s=new Blob(t._body,{type:(o["content-type"]||{}).value||""}));var i=[];if(Object.keys(o).forEach((function(t){var r=o[t].name,s=o[t].value;Array.isArray(s)?s.forEach((function(t){i.push([r,t]);})):i.push([r,s]);})),"fetch"===t._mode){var u=null;if(I.abortController){var d=new AbortController;u=d.signal,t._fetchAbortController=d,"requestTimeout"in r&&0!==r.requestTimeout&&(t._fetchTimer=N.setTimeout((function(){t.emit("requestTimeout"),t._fetchAbortController&&t._fetchAbortController.abort();}),r.requestTimeout));}N.fetch(t._opts.url,{method:t._opts.method,headers:i,body:s||void 0,mode:"cors",credentials:r.withCredentials?"include":"same-origin",signal:u}).then((function(r){t._fetchResponse=r,t._connect();}),(function(r){N.clearTimeout(t._fetchTimer),t._destroyed||t.emit("error",r);}));}else {var c=t._xhr=new N.XMLHttpRequest;try{c.open(t._opts.method,t._opts.url,!0);}catch(r){return k.nextTick((function(){t.emit("error",r);})),void 0}"responseType"in c&&(c.responseType=t._mode),"withCredentials"in c&&(c.withCredentials=!!r.withCredentials),"text"===t._mode&&"overrideMimeType"in c&&c.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in r&&(c.timeout=r.requestTimeout,c.ontimeout=function(){t.emit("requestTimeout");}),i.forEach((function(t){c.setRequestHeader(t[0],t[1]);})),t._response=null,c.onreadystatechange=function(){switch(c.readyState){case G.LOADING:case G.DONE:t._onXHRProgress();}},"moz-chunked-arraybuffer"===t._mode&&(c.onprogress=function(){t._onXHRProgress();}),c.onerror=function(){t._destroyed||t.emit("error",new Error("XHR error"));};try{c.send(s);}catch(r){return k.nextTick((function(){t.emit("error",r);})),void 0}}}},B.prototype._onXHRProgress=function(){var t=this||N;(function(t){try{var r=t.status;return null!==r&&0!==r}catch(t){return !1}})(t._xhr)&&!t._destroyed&&(t._response||t._connect(),t._response._onXHRProgress());},B.prototype._connect=function(){var t=this||N;t._destroyed||(t._response=new j(t._xhr,t._fetchResponse,t._mode,t._fetchTimer),t._response.on("error",(function(r){t.emit("error",r);})),t.emit("response",t._response));},B.prototype._write=function(t,r,o){(this||N)._body.push(t),o();},B.prototype.abort=B.prototype.destroy=function(){var t=this||N;t._destroyed=!0,N.clearTimeout(t._fetchTimer),t._response&&(t._response._destroyed=!0),t._xhr?t._xhr.abort():t._fetchAbortController&&t._fetchAbortController.abort();},B.prototype.end=function(t,r,o){var s=this||N;"function"==typeof t&&(o=t,t=void 0),F.Writable.prototype.end.call(s,t,r,o);},B.prototype.flushHeaders=function(){},B.prototype.setTimeout=function(){},B.prototype.setNoDelay=function(){},B.prototype.setSocketKeepAlive=function(){};var X=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],z="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,K={},W=q,V=A,Y=R,$=C,J=h,Q=K;Q.request=function(t,r){t="string"==typeof t?J.parse(t):Y(t);var o=-1===z.location.protocol.search(/^https?:$/)?"http:":"",s=t.protocol||o,i=t.hostname||t.host,u=t.port,d=t.path||"/";i&&-1!==i.indexOf(":")&&(i="["+i+"]"),t.url=(i?s+"//"+i:"")+(u?":"+u:"")+d,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var c=new W(t);return r&&c.on("response",r),c},Q.get=function(t,r){var o=Q.request(t,r);return o.end(),o},Q.ClientRequest=W,Q.IncomingMessage=V.IncomingMessage,Q.Agent=function(){},Q.Agent.defaultMaxSockets=4,Q.globalAgent=new Q.Agent,Q.STATUS_CODES=$,Q.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"];

var o="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var e={};var a$1=K;var l=h;var p=e;for(var n$1 in a$1)a$1.hasOwnProperty(n$1)&&(p[n$1]=a$1[n$1]);p.request=function(t,r){t=validateParams(t);return a$1.request.call(this||o,t,r)};p.get=function(t,r){t=validateParams(t);return a$1.get.call(this||o,t,r)};function validateParams(t){"string"===typeof t&&(t=l.parse(t));t.protocol||(t.protocol="https:");if("https:"!==t.protocol)throw new Error('Protocol "'+t.protocol+'" not supported. Expected "https:"');return t}

var Agent = e.Agent;
var ClientRequest = e.ClientRequest;
var IncomingMessage = e.IncomingMessage;
var METHODS = e.METHODS;
var STATUS_CODES = e.STATUS_CODES;
var get = e.get;
var globalAgent = e.globalAgent;
var request = e.request;

export default e;
export { Agent, ClientRequest, IncomingMessage, METHODS, STATUS_CODES, get, globalAgent, request };
