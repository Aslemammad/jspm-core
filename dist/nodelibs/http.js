import { e as e$3 } from './chunk-abfeab40.js';
import { v as v$1 } from './chunk-00c6b2a2.js';
import './chunk-b2fb9ac7.js';
import './chunk-b50b117f.js';
import { j } from './chunk-9bc25606.js';
import './chunk-a7dd8f94.js';
import './chunk-d9ac4b84.js';
import { d as d$1 } from './chunk-2ead36ea.js';
import { h as h$1 } from './chunk-d3f7121b.js';

var e="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var r={};r.fetch=isFunction(e.fetch)&&isFunction(e.ReadableStream);r.writableStream=isFunction(e.WritableStream);r.abortController=isFunction(e.AbortController);var t;function getXHR(){if(void 0!==t)return t;if(e.XMLHttpRequest){t=new e.XMLHttpRequest;try{t.open("GET",e.XDomainRequest?"/":"https://example.com");}catch(e){t=null;}}else t=null;return t}function checkTypeSupport(e){var r=getXHR();if(!r)return false;try{r.responseType=e;return r.responseType===e}catch(e){}return false}r.arraybuffer=r.fetch||checkTypeSupport("arraybuffer");r.msstream=!r.fetch&&checkTypeSupport("ms-stream");r.mozchunkedarraybuffer=!r.fetch&&checkTypeSupport("moz-chunked-arraybuffer");r.overrideMimeType=r.fetch||!!getXHR()&&isFunction(getXHR().overrideMimeType);function isFunction(e){return "function"===typeof e}t=null;

var r$1={};r$1=extend;var e$1=Object.prototype.hasOwnProperty;function extend(){var r={};for(var t=0;t<arguments.length;t++){var a=arguments[t];for(var n in a)e$1.call(a,n)&&(r[n]=a[n]);}return r}var t$1=r$1;

var e$2={};e$2={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};var t$2=e$2;

var u="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var c={};var f=j.Buffer;var d=v$1;var l=r;var h=e$3;var p=d$1;var m=c.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};var v=c.IncomingMessage=function(e,r,t,o){var a=this||u;p.Readable.call(a);a._mode=t;a.headers={};a.rawHeaders=[];a.trailers={};a.rawTrailers=[];a.on("end",(function(){d.nextTick((function(){a.emit("close");}));}));if("fetch"===t){a._fetchResponse=r;a.url=r.url;a.statusCode=r.status;a.statusMessage=r.statusText;r.headers.forEach((function(e,r){a.headers[r.toLowerCase()]=e;a.rawHeaders.push(r,e);}));if(l.writableStream){var s=new WritableStream({write:function(e){return new Promise((function(r,t){a._destroyed?t():a.push(f.from(e))?r():a._resumeFetch=r;}))},close:function(){u.clearTimeout(o);a._destroyed||a.push(null);},abort:function(e){a._destroyed||a.emit("error",e);}});try{r.body.pipeTo(s).catch((function(e){u.clearTimeout(o);a._destroyed||a.emit("error",e);}));return}catch(e){}}var n=r.body.getReader();function read(){n.read().then((function(e){if(!a._destroyed)if(e.done){u.clearTimeout(o);a.push(null);}else {a.push(f.from(e.value));read();}})).catch((function(e){u.clearTimeout(o);a._destroyed||a.emit("error",e);}));}read();}else {a._xhr=e;a._pos=0;a.url=e.responseURL;a.statusCode=e.status;a.statusMessage=e.statusText;var i=e.getAllResponseHeaders().split(/\r?\n/);i.forEach((function(e){var r=e.match(/^([^:]+):\s*(.*)/);if(r){var t=r[1].toLowerCase();if("set-cookie"===t){void 0===a.headers[t]&&(a.headers[t]=[]);a.headers[t].push(r[2]);}else void 0!==a.headers[t]?a.headers[t]+=", "+r[2]:a.headers[t]=r[2];a.rawHeaders.push(r[1],r[2]);}}));a._charset="x-user-defined";if(!l.overrideMimeType){var c=a.rawHeaders["mime-type"];if(c){var h=c.match(/;\s*charset=([^;])(;|$)/);h&&(a._charset=h[1].toLowerCase());}a._charset||(a._charset="utf-8");}}};h(v,p.Readable);v.prototype._read=function(){var e=this||u;var r=e._resumeFetch;if(r){e._resumeFetch=null;r();}};v.prototype._onXHRProgress=function(){var e=this||u;var r=e._xhr;var t=null;switch(e._mode){case"text":t=r.responseText;if(t.length>e._pos){var o=t.substr(e._pos);if("x-user-defined"===e._charset){var a=f.alloc(o.length);for(var s=0;s<o.length;s++)a[s]=255&o.charCodeAt(s);e.push(a);}else e.push(o,e._charset);e._pos=t.length;}break;case"arraybuffer":if(r.readyState!==m.DONE||!r.response)break;t=r.response;e.push(f.from(new Uint8Array(t)));break;case"moz-chunked-arraybuffer":t=r.response;if(r.readyState!==m.LOADING||!t)break;e.push(f.from(new Uint8Array(t)));break;case"ms-stream":t=r.response;if(r.readyState!==m.LOADING)break;var n=new u.MSStreamReader;n.onprogress=function(){if(n.result.byteLength>e._pos){e.push(f.from(new Uint8Array(n.result.slice(e._pos))));e._pos=n.result.byteLength;}};n.onload=function(){e.push(null);};n.readAsArrayBuffer(t);break}e._xhr.readyState===m.DONE&&"ms-stream"!==e._mode&&e.push(null);};var _="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var y={};var b=j.Buffer;var T=v$1;var g=r;var E=e$3;var C=c;var w=d$1;var A=C.IncomingMessage;var R=C.readyStates;function decideMode(e,r){return g.fetch&&r?"fetch":g.mozchunkedarraybuffer?"moz-chunked-arraybuffer":g.msstream?"ms-stream":g.arraybuffer&&e?"arraybuffer":"text"}var O=y=function(e){var r=this||_;w.Writable.call(r);r._opts=e;r._body=[];r._headers={};e.auth&&r.setHeader("Authorization","Basic "+b.from(e.auth).toString("base64"));Object.keys(e.headers).forEach((function(t){r.setHeader(t,e.headers[t]);}));var t;var o=true;if("disable-fetch"===e.mode||"requestTimeout"in e&&!g.abortController){o=false;t=true;}else if("prefer-streaming"===e.mode)t=false;else if("allow-wrong-content-type"===e.mode)t=!g.overrideMimeType;else {if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");t=true;}r._mode=decideMode(t,o);r._fetchTimer=null;r.on("finish",(function(){r._onFinish();}));};E(O,w.Writable);O.prototype.setHeader=function(e,r){var t=this||_;var o=e.toLowerCase();-1===H.indexOf(o)&&(t._headers[o]={name:e,value:r});};O.prototype.getHeader=function(e){var r=(this||_)._headers[e.toLowerCase()];return r?r.value:null};O.prototype.removeHeader=function(e){var r=this||_;delete r._headers[e.toLowerCase()];};O.prototype._onFinish=function(){var e=this||_;if(!e._destroyed){var r=e._opts;var t=e._headers;var o=null;"GET"!==r.method&&"HEAD"!==r.method&&(o=new Blob(e._body,{type:(t["content-type"]||{}).value||""}));var a=[];Object.keys(t).forEach((function(e){var r=t[e].name;var o=t[e].value;Array.isArray(o)?o.forEach((function(e){a.push([r,e]);})):a.push([r,o]);}));if("fetch"===e._mode){var s=null;if(g.abortController){var n=new AbortController;s=n.signal;e._fetchAbortController=n;"requestTimeout"in r&&0!==r.requestTimeout&&(e._fetchTimer=_.setTimeout((function(){e.emit("requestTimeout");e._fetchAbortController&&e._fetchAbortController.abort();}),r.requestTimeout));}_.fetch(e._opts.url,{method:e._opts.method,headers:a,body:o||void 0,mode:"cors",credentials:r.withCredentials?"include":"same-origin",signal:s}).then((function(r){e._fetchResponse=r;e._connect();}),(function(r){_.clearTimeout(e._fetchTimer);e._destroyed||e.emit("error",r);}));}else {var i=e._xhr=new _.XMLHttpRequest;try{i.open(e._opts.method,e._opts.url,true);}catch(r){T.nextTick((function(){e.emit("error",r);}));return}"responseType"in i&&(i.responseType=e._mode);"withCredentials"in i&&(i.withCredentials=!!r.withCredentials);"text"===e._mode&&"overrideMimeType"in i&&i.overrideMimeType("text/plain; charset=x-user-defined");if("requestTimeout"in r){i.timeout=r.requestTimeout;i.ontimeout=function(){e.emit("requestTimeout");};}a.forEach((function(e){i.setRequestHeader(e[0],e[1]);}));e._response=null;i.onreadystatechange=function(){switch(i.readyState){case R.LOADING:case R.DONE:e._onXHRProgress();break}};"moz-chunked-arraybuffer"===e._mode&&(i.onprogress=function(){e._onXHRProgress();});i.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"));};try{i.send(o);}catch(r){T.nextTick((function(){e.emit("error",r);}));return}}}};function statusValid(e){try{var r=e.status;return null!==r&&0!==r}catch(e){return false}}O.prototype._onXHRProgress=function(){var e=this||_;if(statusValid(e._xhr)&&!e._destroyed){e._response||e._connect();e._response._onXHRProgress();}};O.prototype._connect=function(){var e=this||_;if(!e._destroyed){e._response=new A(e._xhr,e._fetchResponse,e._mode,e._fetchTimer);e._response.on("error",(function(r){e.emit("error",r);}));e.emit("response",e._response);}};O.prototype._write=function(e,r,t){var o=this||_;o._body.push(e);t();};O.prototype.abort=O.prototype.destroy=function(){var e=this||_;e._destroyed=true;_.clearTimeout(e._fetchTimer);e._response&&(e._response._destroyed=true);e._xhr?e._xhr.abort():e._fetchAbortController&&e._fetchAbortController.abort();};O.prototype.end=function(e,r,t){var o=this||_;if("function"===typeof e){t=e;e=void 0;}w.Writable.prototype.end.call(o,e,r,t);};O.prototype.flushHeaders=function(){};O.prototype.setTimeout=function(){};O.prototype.setNoDelay=function(){};O.prototype.setSocketKeepAlive=function(){};var H=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"];var S=y;var x="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var k={};var M=S;var N=c;var P=t$1;var D=t$2;var L=h$1;var I=k;I.request=function(e,r){e="string"===typeof e?L.parse(e):P(e);var t=-1===x.location.protocol.search(/^https?:$/)?"http:":"";var o=e.protocol||t;var a=e.hostname||e.host;var s=e.port;var n=e.path||"/";a&&-1!==a.indexOf(":")&&(a="["+a+"]");e.url=(a?o+"//"+a:"")+(s?":"+s:"")+n;e.method=(e.method||"GET").toUpperCase();e.headers=e.headers||{};var i=new M(e);r&&i.on("response",r);return i};I.get=function get(e,r){var t=I.request(e,r);t.end();return t};I.ClientRequest=M;I.IncomingMessage=N.IncomingMessage;I.Agent=function(){};I.Agent.defaultMaxSockets=4;I.globalAgent=new I.Agent;I.STATUS_CODES=D;I.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"];

var Agent = k.Agent;
var ClientRequest = k.ClientRequest;
var IncomingMessage = k.IncomingMessage;
var METHODS = k.METHODS;
var STATUS_CODES = k.STATUS_CODES;
var get = k.get;
var globalAgent = k.globalAgent;
var request = k.request;

export default k;
export { Agent, ClientRequest, IncomingMessage, METHODS, STATUS_CODES, get, globalAgent, request };
